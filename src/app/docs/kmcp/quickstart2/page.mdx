---
title: "Quickstart2"
sectionOrder: 20
description: "Get started with KMCP"
---

# Quickstart2 (longer)

Install the KMCP CLI and quickly spin up your first FastMCP Python server in a Kubernetes cluster. 

## Prerequisites

- [Docker](https://docs.docker.com/desktop/) for building your MCP server images locally
- [Kind](https://kind.sigs.k8s.io) for creating and running a local Kubernetes cluster
- [Helm](https://helm.sh/docs/intro/install/) for installing the KMCP chart
- [uv](https://docs.astral.sh/uv/getting-started/installation/) for running FastMCP servers
- MCP Inspector tool to test access to your MCP server
  ```sh
  npm install -g @modelcontextprotocol/inspector
  ```

## Install the KMCP CLI

1. Download the KMCP CLI from the [release page](https://github.com/kagent-dev/kmcp/releases). To find the operating system and system architecture for which you need to download the CLI, run the following commands. 
   ```sh
   OS=$(uname | tr '[:upper:]' '[:lower:]' )
   ARCH=$(uname -m )
   echo $OS
   echo $ARCH
   ``` 

2. Install the KMCP CLI. 
   ```sh
   chmod +x kmcp-$OS-$ARCH
   mv kmcp-$OS-$ARCH kmcp
   sudo mv kmcp /usr/local/bin 
   export PATH=$HOME/.kmcp/bin:$PATH
   ```

3. Verify that the KMCP CLI is installed. 
   ```sh
   kmcp --help
   ```
 
## Spin up your first MCP server

1. Create a scaffold for your FastMCP Python server project in the `my-mcp-server` directory. The scaffold includes all the files and dependencies to spin up the MCP server with a sample `echo` tool. 

   **Tip:** Want to use a different MCP framework instead? Try out [MCP Go](/docs/kmcp/develop/mcp-go).
   
   ```sh
   kmcp init python my-mcp-server
   ```

2. Run your MCP server on your local machine. The command builds the Docker image for your MCP server and automatically opens the MCP inspector tool so that you can connect to your MCP server and test it.
   ```sh
   kmcp run --project-dir my-mcp-server
   ```
   
   Example output: 
   ```sh
   Starting MCP inspector...
   ‚öôÔ∏è Proxy server listening on localhost:6277
   üîë Session token: 39359f4867a366abc8ecdf5daa243d547d4f61a43e207cc1adbdc23ae47550f8
      Use this token to authenticate requests or set DANGEROUSLY_OMIT_AUTH=true to disable auth

   üöÄ MCP Inspector is up and running at:
      http://localhost:6274/?MCP_PROXY_AUTH_TOKEN=39359f4867a366abc8ecdf5daa243d547d4f61a43e207cc1adbdc23ae47550f8
   ```
   
3. In the MCP inspector tool, click **Connect** to connect to your MCP server. Note that it might take a few seconds for the MCP inspector tool to successfully connect to your MCP server. If the connection fails, make sure the following fields are set in the MCP inspector tool. 
   * Select **STDIO** from the **Transport Type** drop down. 
   * In the **Command** field, enter `uv`. 
   * In the **Arguments** field, enter `run python src/main.py`. 
   * In the **Configuration** section, enter the session token from the previous command output in the **Proxy Session Token** field. 
   
   ![Locally run the MCP server](/images/kmcp-local-inspector-ov.png "Locally run your MCP server with the MCP inspector tool")

4. Try out the `echo` MCP tool. 
   1. Go to the **Tools** tab and click **List Tools**. 
   2. Select the `echo` tool. 
   3. Enter any string in the **message** field, such as `Hello world` and click **Run Tool**. 
   4. Verify that you see your message echoed in the **Tool result** card. 
   
   ![Run echo tool in MCP inspector UI](/images/kmcp-local-echo-success.png "Successful run of the echo tool")
   

## Install the KMCP controller

With your first FastMCP Python server up and running, you can now deploy it to a Kubernetes cluster. To simplify this process, you install the KMCP controller manager. 

The KMCP controller manages the lifecycle of MCP servers that are defined in an MCPServer custom resource.

1. Create a kind cluster. 
   
   **Tip**: If you already have a Kubernetes cluster that you want to use, switch to the kubeconfig context for that cluster by using the `kubectl config use-context [CONTEXT-NAME]` command. 
   ```sh
   kind create cluster
   ```

2. Install the following KMCP controller components in your cluster. 
   * The MCPServer Custom Resource Definition to define your MCP server. 
   * The ClusterRole and ClusterRoleBinding to control RBAC permissions for the KMCP controller.
   * The KMCP controller deployment that automatically manages the lifecycle of MCPServer resources. 
   
   ```sh
   kmcp install
   ``` 
   
3. Verify that the KMCP controller manager is up and running. 
   ```sh
   kubectl get pods -n kmcp-system
   ```
   
   Example output: 
   ```sh
   NAME                                       READY   STATUS    RESTARTS   AGE
   kmcp-controller-manager-66c8764c66-8h5sl   1/1     Running   0          27h
   ```
   
## Build the MCP server image

1. Build a Docker image from the code in your MCP project.
   ```sh
   kmcp build --docker --tag latest --project-dir my-mcp-server -v
   ```

2. Load the image to your kind cluster.
   ```sh
   kind load docker-image my-mcp-server:latest --name kind
   ```

## Deploy the MCP server


1. Create an MCP server resource that references the MCP server image that you built earlier. 
   ```yaml
   kubectl apply -f- <<EOF
   apiVersion: kagent.dev/v1alpha1
   kind: MCPServer
   metadata:
     name: my-mcp-server
   spec:
     deployment:
       image: "my-mcp-server:latest"
       port: 3000
       cmd: "python"
       args: ["src/main.py"]
     transportType: "stdio"
   EOF
   ```

2. Verify that your MCP server is up and running. 
   ```sh
   kubectl get pods 
   ```
   
   Example output: 
   ```sh
   NAME                             READY   STATUS    RESTARTS   AGE
   my-mcp-server-5745b494b6-fwzmf   1/1     Running   0          10s
   ```

## Test access to the MCP server

1. Port-forward the MCP server that you deployed. 
   ```sh
   kubectl port-forward deploy/my-mcp-server 3000
   ```

2. Run the MCP inspector tool. In your CLI output, find the URL that the MCP inspector tool is exposed on. 
   ```sh
   npx @modelcontextprotocol/inspector
   ```
   
   Example output: 
   ```sh
   üöÄ MCP Inspector is up and running at:
   http://localhost:6274/?MCP_PROXY_AUTH_TOKEN=8aca1a7088efc984e433fd750ed042b1881fbda3734282e3f0e524b00fc3e69f
   ```
   
3. Open the MCP inspector tool by using the URL from the previous command. Then, connect to your MCP server. 
   * Select **Streamable HTTP** from the **Transport Type** drop down. 
   * Enter `http://127.0.0.1:3000/mcp` in the **URL** field. 
   * Expand the **Configuration** section and make sure that the **Proxy Session Token** is set to the value of the `PROXY_AUTH_TOKEN` that was shown in the CLI output when you opened the MCP inspector tool. 
   
   ![MCP inspector UI for FastMCP](/images/kmcp-inspector-ov.png "Connect to FastMCP server with MCP inspector tool")


4. Try out the built-in `echo` MCP tool. 
   1. Go to the **Tools** tab and click **List Tools**. 
   2. Select the `echo` tool. 
   3. Enter any string in the **message** field, such as `Hello world` and click **Run Tool**. 
   4. Verify that you see your message echoed in the **Tool result** card. 
   
   ![Run echo tool in MCP inspector UI](/images/kmcp-inspector-echo-success.png "Successful run of the echo tool")
   
   
Congratulations, you successfully developed an MCP server and deployed it to a Kubernetes cluster with KMCP!

## Next

* Explore other MCP frameworks, such as [MCP Go](/docs/kmcp/develop/mcp-go). 
* Learn how to [manage secrets for your MCP server](/docs/kmcp/secrets) when deploying it in a Kubernetes cluster. 


